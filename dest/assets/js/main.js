function toggleModal(){fab.classList.toggle("modalOpen"),newJourneySection.classList.toggle("modalOpen")}function DisplayMessage(e,t){this.displayMessageEl=document.getElementsByClassName("display-message")[0],this.messageEl=document.getElementsByClassName("dm__message")[0],this.actionBTN=document.getElementsByClassName("dm__action")[0],this.dismissBTN=document.getElementsByClassName("dm__dismiss")[0],this._init(e,t)}function Journey(e,t,s,n){this._fromCoordinates=e||"51.5151846554,-0.17553880792",this._toCoordinates=t||"51.52989409,-0.185888819",this._fromName=s?"&fromName="+s:"",this._toName=n?"&toName="+n:"",this._url="https://api.tfl.gov.uk/Journey/JourneyResults/"+this._fromCoordinates+"/to/"+this._toCoordinates+"?nationalSearch=False&timeIs=Departing&journeyPreference=LeastTime&mode=tube&walkingSpeed=Average&cyclePreference=None&alternativeCycle=False&alternativeWalking=False&applyHtmlMarkup=False&useMultiModalCall=False&walkingOptimization=False"+this._fromName+this._toName+"&app_id="+app_id+"&app_key="+app_key,this._init()}var fab=document.getElementsByClassName("fab")[0],newJourneySection=document.getElementsByClassName("new-journey")[0];fab.addEventListener("click",function(){toggleModal()}),DisplayMessage.prototype._open=function(){this.displayMessageEl.classList.add("open")},DisplayMessage.prototype._close=function(){this.displayMessageEl.classList.remove("open")},DisplayMessage.prototype._reset=function(){this.displayMessageEl.classList.remove("success"),this.displayMessageEl.classList.remove("danger"),this.messageEl.innerHTML="",this.actionBTN.style.display="flex"},DisplayMessage.prototype.setupAction=function(e,t){!e|!t&&(this.actionBTN.style.display="none"),this.actionBTN.innerHTML=e,this.actionBTN.addEventListener("click",t)},DisplayMessage.prototype._init=function(e,t){this._reset(),this.displayMessageEl.classList.add(e),this.messageEl.innerHTML=t,this._open();var s=this;this.dismissBTN.addEventListener("click",function(){s._close()})};var app_id="1e55ad45",app_key="40c230d6c65288e70be34a738dcc6b91";Journey.prototype._setupData=function(e){for(var t={departure_location:e.journeys[0].legs[0].departurePoint.commonName,arrival_location:e.journeys[0].legs[e.journeys[0].legs.length-1].arrivalPoint.commonName,departure_time:e.journeys[0].startDateTime,journeys:e.journeys},s=0;s<e.journeys.length;s++){t.journeys[s].points=[],t.journeys[s].departure_location,t.journeys[s].arrival_location;for(var n=0;n<e.journeys[s].legs.length;n++)0!=n&&t.journeys[s].points.push(!0),0==n&&(t.journeys[s].departure_location=e.journeys[s].legs[n].departurePoint.commonName),n==e.journeys[s].legs.length-1&&(t.journeys[s].arrival_location=e.journeys[s].legs[n].arrivalPoint.commonName)}return t},Journey.prototype._fetchData=function(){return fetch(this._url).then(function(e){return e.json()})["catch"](function(e){console.log("there was an error here")})},Journey.prototype._init=function(){var e=this;this._fetchData().then(function(t){return e._setupData(t)}).then(function(e){var t=MyApp.templates.journeys(e);document.getElementById("journeys").innerHTML=t})["catch"](function(e){console.log("caught!",e);var t=new DisplayMessage("danger","Looks like there was an error getting your journey. Please try a different route");t.setupAction(!1)})},new Journey;var newJourneyForm=document.getElementById("new-journey-form");newJourneyForm.addEventListener("submit",function(e){e.preventDefault();var t=document.getElementById("location_from").value,s=document.getElementById("location_to").value;new Journey(t,s);toggleModal()});